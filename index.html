<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rojgar Sangam Tools - All-in-One Government Exam Tools</title>
    
    <meta name="description" content="Free online tools for Sarkari Result: Resume Maker, Image Resizer, PDF Merge, Split, Compress, Word to PDF, and Background Remover. 100% Client-Side Secure.">
    <meta name="keywords" content="rojgar sangam tools, image resizer, resume maker, pdf merge, jpg to pdf, sarkari result tools">
    <meta name="google-site-verification" content="PASTE_YOUR_REAL_CODE_HERE" />

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf-lib/1.17.1/pdf-lib.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mammoth/1.6.0/mammoth.browser.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script>pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';</script>

    <style>
        /* --- BRAND COLORS --- */
        :root {
            --primary-blue: #00079e;
            --primary-text: #333333;
            --border-color: #667799;
            --bg-light: #f8f8ff;
            --bg-card: #ffffff;
            --accent-orange: #ff5722;
        }

        body { font-family: 'Segoe UI', Tahoma, sans-serif; background-color: var(--bg-light); color: var(--primary-text); }

        /* --- HEADER & NAVIGATION --- */
       .header-top { background: var(--primary-blue); color: white; padding: 5px 0; font-size: 12px; text-align: center; }
       .main-header { background: white; border-bottom: 3px solid var(--primary-blue); padding: 10px 0; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
       .nav-item { color: var(--primary-text); font-weight: 700; text-transform: uppercase; padding: 10px 15px; transition: 0.3s; font-size: 14px; }
       .nav-item:hover { color: var(--primary-blue); background: #f0f4ff; border-radius: 4px; }

        /* --- CARDS & SECTIONS --- */
       .tool-card { 
            background: white; border: 1px solid #e5e7eb; border-radius: 8px; padding: 20px; 
            text-align: center; transition: all 0.3s; cursor: pointer; display: flex; flex-direction: column; align-items: center; justify-content: center;
            height: 100%; position: relative; overflow: hidden;
        }
       .tool-card:hover { transform: translateY(-5px); box-shadow: 0 10px 25px rgba(0,7,158,0.15); border-color: var(--primary-blue); }
       .tool-card::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 4px; background: var(--primary-blue); opacity: 0; transition: 0.3s; }
       .tool-card:hover::before { opacity: 1; }
        
       .icon-circle { width: 60px; height: 60px; background: #f0f4ff; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-bottom: 15px; color: var(--primary-blue); font-size: 24px; }
       .section-title { font-size: 24px; font-weight: 800; color: var(--primary-text); margin-bottom: 20px; border-left: 5px solid var(--primary-blue); padding-left: 15px; }

        /* --- FOOTER --- */
       .footer-area { background: #222; color: #ddd; font-size: 14px; margin-top: 50px; }
       .footer-link { color: #bbb; text-decoration: none; display: block; margin-bottom: 8px; transition: 0.3s; }
       .footer-link:hover { color: white; padding-left: 5px; }
       .social-btn { width: 35px; height: 35px; display: inline-flex; align-items: center; justify-content: center; border-radius: 50%; background: #333; color: white; margin-right: 5px; transition: 0.3s; }
       .social-btn:hover { background: var(--primary-blue); transform: scale(1.1); }

        /* --- TOOL INTERFACE --- */
       .tool-container { background: white; border: 1px solid var(--border-color); padding: 30px; border-radius: 8px; max-width: 900px; margin: 20px auto; box-shadow: 0 4px 6px rgba(0,0,0,0.05); }
       .form-label { font-weight: bold; font-size: 13px; display: block; margin-bottom: 5px; color: #555; }
       .form-control { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px; font-size: 14px; margin-bottom: 15px; }
       .form-control:focus { border-color: var(--primary-blue); outline: none; box-shadow: 0 0 0 3px rgba(0,7,158,0.1); }
       .btn-action { background: var(--primary-blue); color: white; padding: 12px 25px; border-radius: 5px; font-weight: bold; width: 100%; border: none; cursor: pointer; transition: 0.3s; }
       .btn-action:hover { background: #00057a; }
        
       .hidden { display: none!important; }
    </style>
</head>
<body>

    <div class="header-top">
        <div class="max-w-7xl mx-auto px-4">
            Trusted by 10 Lakh+ Students for Government Job Forms
        </div>
    </div>
    
    <header class="main-header sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 flex flex-col md:flex-row justify-between items-center gap-4">
            <a href="#" onclick="showHome()" class="flex items-center gap-2">
                <img src="https://raw.githubusercontent.com/sanjeevkumarambn/tools/main/Rojgar%20Sangam%20HD%20Logo.png" alt="Rojgar Sangam" class="h-12">
            </a>
            
            <nav class="flex flex-wrap justify-center gap-2 md:gap-6">
                <a href="#" onclick="showHome()" class="nav-item">Home</a>
                <a href="#image-tools" class="nav-item">Image Tools</a>
                <a href="#pdf-tools" class="nav-item">PDF Tools</a>
                <a href="#" onclick="openTool('resume-maker')" class="nav-item text-orange-600">Resume Maker</a>
            </nav>
        </div>
    </header>
    <main class="max-w-7xl mx-auto px-4 py-8 min-h-screen">

        <div id="home-view">
            
            <div class="bg-blue-50 border border-blue-100 rounded-xl p-8 mb-10 text-center relative overflow-hidden">
                <h1 class="text-3xl md:text-4xl font-extrabold text-[#00079e] mb-3">Simplify Your Workflow</h1>
                <p class="text-gray-600 max-w-2xl mx-auto">Edit, Convert, and Manage your documents for Sarkari Result forms securely in your browser. No data is uploaded to our servers.</p>
                <div class="mt-6 flex justify-center gap-4">
                    <button onclick="openTool('resume-maker')" class="bg-[#00079e] text-white px-6 py-2 rounded-full font-bold hover:bg-blue-900 transition">Create Resume</button>
                    <button onclick="openTool('image-resizer')" class="bg-white text-[#00079e] border border-[#00079e] px-6 py-2 rounded-full font-bold hover:bg-blue-50 transition">Resize Photo</button>
                </div>
            </div>

            <div id="pdf-tools" class="mb-12">
                <div class="section-title">PDF Tools</div>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
                    <div onclick="openTool('merge-pdf')" class="tool-card group">
                        <div class="icon-circle"><i class="fas fa-file-pdf"></i></div>
                        <h3 class="font-bold">Merge PDF</h3>
                        <p class="text-xs text-gray-500 mt-1">Combine multiple PDFs</p>
                    </div>
                    <div onclick="openTool('split-pdf')" class="tool-card group">
                        <div class="icon-circle"><i class="fas fa-scissors"></i></div>
                        <h3 class="font-bold">Split PDF</h3>
                        <p class="text-xs text-gray-500 mt-1">Extract pages easily</p>
                    </div>
                    <div onclick="openTool('compress-pdf')" class="tool-card group">
                        <div class="icon-circle"><i class="fas fa-compress-arrows-alt"></i></div>
                        <h3 class="font-bold">Compress PDF</h3>
                        <p class="text-xs text-gray-500 mt-1">Reduce PDF size</p>
                    </div>
                    <div onclick="openTool('word-to-pdf')" class="tool-card group">
                        <div class="icon-circle"><i class="fas fa-file-word"></i></div>
                        <h3 class="font-bold">Word to PDF</h3>
                        <p class="text-xs text-gray-500 mt-1">Convert DOCX to PDF</p>
                    </div>
                    <div onclick="openTool('jpg-to-pdf')" class="tool-card group">
                        <div class="icon-circle"><i class="fas fa-images"></i></div>
                        <h3 class="font-bold">JPG to PDF</h3>
                        <p class="text-xs text-gray-500 mt-1">Images to PDF</p>
                    </div>
                    <div onclick="openTool('pdf-to-jpg')" class="tool-card group">
                        <div class="icon-circle"><i class="fas fa-file-image"></i></div>
                        <h3 class="font-bold">PDF to JPG</h3>
                        <p class="text-xs text-gray-500 mt-1">Save pages as Images</p>
                    </div>
                </div>
            </div>

            <div id="image-tools">
                <div class="section-title">Image & Other Tools</div>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
                    <div onclick="openTool('resume-maker')" class="tool-card border-orange-500 border-b-4">
                        <div class="icon-circle text-orange-600"><i class="fas fa-user-tie"></i></div>
                        <h3 class="font-bold">Resume Maker</h3>
                        <p class="text-xs text-gray-500 mt-1">Professional Bio-Data</p>
                    </div>
                    <div onclick="openTool('image-resizer')" class="tool-card">
                        <div class="icon-circle"><i class="fas fa-crop-simple"></i></div>
                        <h3 class="font-bold">Image Resizer</h3>
                        <p class="text-xs text-gray-500 mt-1">Set Width, Height, KB</p>
                    </div>
                    <div onclick="openTool('remove-bg')" class="tool-card">
                        <div class="icon-circle"><i class="fas fa-eraser"></i></div>
                        <h3 class="font-bold">Remove BG</h3>
                        <p class="text-xs text-gray-500 mt-1">Auto Background Remover</p>
                    </div>
                    <div onclick="openTool('photo-joiner')" class="tool-card">
                        <div class="icon-circle"><i class="fas fa-object-group"></i></div>
                        <h3 class="font-bold">Photo Joiner</h3>
                        <p class="text-xs text-gray-500 mt-1">Join Photo & Sign</p>
                    </div>
                    <div onclick="openTool('name-date')" class="tool-card">
                        <div class="icon-circle"><i class="fas fa-calendar-plus"></i></div>
                        <h3 class="font-bold">Name & Date</h3>
                        <p class="text-xs text-gray-500 mt-1">Add Name on Photo</p>
                    </div>
                    <div onclick="openTool('age-calculator')" class="tool-card">
                        <div class="icon-circle"><i class="fas fa-birthday-cake"></i></div>
                        <h3 class="font-bold">Age Calculator</h3>
                        <p class="text-xs text-gray-500 mt-1">Calculate Exact Age</p>
                    </div>
                </div>
            </div>

        </div>
        <div id="tool-resume-maker" class="hidden tool-container">
            <button onclick="showHome()" class="text-blue-600 font-bold mb-4 hover:underline"><i class="fas fa-arrow-left"></i> Back</button>
            <h2 class="text-2xl font-bold mb-6 text-center text-[#00079e]">Resume Maker</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <input type="text" id="rm-name" placeholder="Full Name" class="form-control">
                <input type="text" id="rm-mobile" placeholder="Mobile No" class="form-control">
                <input type="text" id="rm-email" placeholder="Email ID" class="form-control">
                <input type="text" id="rm-address" placeholder="Address" class="form-control md:col-span-3">
            </div>
            <label class="form-label mt-4">Career Objective</label>
            <textarea id="rm-obj" class="form-control h-20">Seeking a challenging position in a reputed organization to utilize my skills.</textarea>
            <label class="form-label">Academic Qualification (Example: 10th - UP Board - 2018 - 80%)</label>
            <textarea id="rm-edu" class="form-control h-24"></textarea>
            <button onclick="window.print()" class="btn-action mt-4">Print Resume</button>
            <div class="hidden print:block fixed inset-0 bg-white p-10 z-">
                <h1 class="text-3xl font-bold uppercase text-center border-b-2 border-black pb-2" id="p-name"></h1>
                <p class="text-center mt-2" id="p-contact"></p>
                <div class="mt-8 font-bold border-b border-gray-400">OBJECTIVE</div>
                <p class="mt-2 text-sm" id="p-obj"></p>
                <div class="mt-8 font-bold border-b border-gray-400">QUALIFICATIONS</div>
                <p class="mt-2 text-sm whitespace-pre-wrap" id="p-edu"></p>
            </div>
        </div>

        <div id="tool-image-resizer" class="hidden tool-container">
            <button onclick="showHome()" class="text-blue-600 font-bold mb-4 hover:underline"><i class="fas fa-arrow-left"></i> Back</button>
            <h2 class="text-2xl font-bold mb-6 text-center text-[#00079e]">Image Resizer</h2>
            <input type="file" id="ir-file" class="form-control" accept="image/*">
            <div class="flex gap-4">
                <div class="w-1/2">
                    <label class="form-label">Width (px)</label>
                    <input type="number" id="ir-w" value="350" class="form-control">
                </div>
                <div class="w-1/2">
                    <label class="form-label">Height (px)</label>
                    <input type="number" id="ir-h" value="450" class="form-control">
                </div>
            </div>
            <button onclick="resizeImage()" class="btn-action">Download Resized Image</button>
        </div>

        <div id="tool-merge-pdf" class="hidden tool-container">
            <button onclick="showHome()" class="text-blue-600 font-bold mb-4 hover:underline"><i class="fas fa-arrow-left"></i> Back</button>
            <h2 class="text-2xl font-bold mb-6 text-center text-[#00079e]">Merge PDF</h2>
            <div class="p-8 border-2 border-dashed border-gray-300 rounded-lg text-center bg-gray-50">
                <p class="mb-4">Select multiple PDF files to combine them.</p>
                <input type="file" id="mp-files" multiple accept="application/pdf" class="form-control">
                <button onclick="mergePDFs()" class="btn-action">Merge & Download</button>
            </div>
        </div>

        <div id="tool-split-pdf" class="hidden tool-container">
            <button onclick="showHome()" class="text-blue-600 font-bold mb-4 hover:underline"><i class="fas fa-arrow-left"></i> Back</button>
            <h2 class="text-2xl font-bold mb-6 text-center text-[#00079e]">Split PDF</h2>
            <input type="file" id="sp-file" accept="application/pdf" class="form-control">
            <p class="text-sm text-gray-500 mb-2">Each page will be saved as a separate PDF.</p>
            <button onclick="splitPDF()" class="btn-action">Split PDF</button>
        </div>

        <div id="tool-compress-pdf" class="hidden tool-container">
            <button onclick="showHome()" class="text-blue-600 font-bold mb-4 hover:underline"><i class="fas fa-arrow-left"></i> Back</button>
            <h2 class="text-2xl font-bold mb-6 text-center text-[#00079e]">Compress PDF</h2>
            <input type="file" id="cp-file" accept="application/pdf" class="form-control">
            <button onclick="compressPDF()" class="btn-action">Compress PDF</button>
        </div>

        <div id="tool-jpg-to-pdf" class="hidden tool-container">
            <button onclick="showHome()" class="text-blue-600 font-bold mb-4 hover:underline"><i class="fas fa-arrow-left"></i> Back</button>
            <h2 class="text-2xl font-bold mb-6 text-center text-[#00079e]">JPG to PDF</h2>
            <input type="file" id="jp-files" multiple accept="image/*" class="form-control">
            <button onclick="jpgToPdf()" class="btn-action">Convert to PDF</button>
        </div>

        <div id="tool-word-to-pdf" class="hidden tool-container">
            <button onclick="showHome()" class="text-blue-600 font-bold mb-4 hover:underline"><i class="fas fa-arrow-left"></i> Back</button>
            <h2 class="text-2xl font-bold mb-6 text-center text-[#00079e]">Word to PDF</h2>
            <input type="file" id="wp-file" accept=".docx" class="form-control">
            <button onclick="wordToPdf()" class="btn-action">Convert to PDF</button>
        </div>

        <div id="tool-pdf-to-jpg" class="hidden tool-container">
            <button onclick="showHome()" class="text-blue-600 font-bold mb-4 hover:underline"><i class="fas fa-arrow-left"></i> Back</button>
            <h2 class="text-2xl font-bold mb-6 text-center text-[#00079e]">PDF to JPG</h2>
            <input type="file" id="pj-file" accept="application/pdf" class="form-control">
            <button onclick="pdfToJpg()" class="btn-action">Convert to JPG</button>
            <div id="pj-result" class="mt-4 grid grid-cols-2 gap-4"></div>
        </div>

        <div id="tool-remove-bg" class="hidden tool-container">
            <button onclick="showHome()" class="text-blue-600 font-bold mb-4 hover:underline"><i class="fas fa-arrow-left"></i> Back</button>
            <h2 class="text-2xl font-bold mb-6 text-center text-[#00079e]">Remove Background</h2>
            <input type="file" id="rb-file" accept="image/*" class="form-control">
            <button onclick="removeBg()" class="btn-action">Remove Background</button>
            <p class="text-xs text-red-500 mt-2">*Processing happens in browser, may take time.</p>
            <img id="rb-result" class="mt-4 max-w-full border hidden">
        </div>

        <div id="tool-photo-joiner" class="hidden tool-container">
            <button onclick="showHome()" class="text-blue-600 font-bold mb-4 hover:underline"><i class="fas fa-arrow-left"></i> Back</button>
            <h2 class="text-2xl font-bold mb-6 text-center text-[#00079e]">Photo & Signature Joiner</h2>
            <label class="form-label">Upload Photo</label>
            <input type="file" id="pj-photo" accept="image/*" class="form-control">
            <label class="form-label">Upload Signature</label>
            <input type="file" id="pj-sign" accept="image/*" class="form-control">
            <button onclick="joinPhotos()" class="btn-action">Join Images</button>
            <canvas id="pj-canvas" class="mt-4 hidden border w-full"></canvas>
        </div>

        <div id="tool-name-date" class="hidden tool-container">
            <button onclick="showHome()" class="text-blue-600 font-bold mb-4 hover:underline"><i class="fas fa-arrow-left"></i> Back</button>
            <h2 class="text-2xl font-bold mb-6 text-center text-[#00079e]">Name & Date on Photo</h2>
            <input type="file" id="nd-file" accept="image/*" class="form-control">
            <input type="text" id="nd-name" placeholder="Enter Name" class="form-control">
            <input type="date" id="nd-date" class="form-control">
            <button onclick="addNameDate()" class="btn-action">Generate</button>
            <canvas id="nd-canvas" class="mt-4 hidden border w-full"></canvas>
        </div>

        <div id="tool-age-calculator" class="hidden tool-container">
            <button onclick="showHome()" class="text-blue-600 font-bold mb-4 hover:underline"><i class="fas fa-arrow-left"></i> Back</button>
            <h2 class="text-2xl font-bold mb-6 text-center text-[#00079e]">Age Calculator</h2>
            <label class="form-label">Date of Birth</label>
            <input type="date" id="ac-dob" class="form-control">
            <label class="form-label">Age As Of</label>
            <input type="date" id="ac-target" class="form-control">
            <button onclick="calculateAge()" class="btn-action">Calculate</button>
            <div id="ac-result" class="mt-4 p-4 bg-green-100 text-green-800 text-center font-bold hidden border border-green-300 rounded"></div>
        </div>

    </main>
    <footer class="footer-area py-12 px-6">
        <div class="max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-4 gap-8">
            
            <div>
                <h4 class="text-white font-bold text-lg mb-4 border-l-4 border-blue-500 pl-3">About Us</h4>
                <p class="text-gray-400 leading-6">
                    Rojgar Sangam Tools provides free online utilities for students. Create resumes, resize photos for forms, and convert PDFs securely.
                </p>
            </div>

            <div>
                <h4 class="text-white font-bold text-lg mb-4 border-l-4 border-blue-500 pl-3">Policies</h4>
                <a href="https://rojgarsangam.in/privacy-policy/" class="footer-link">Privacy Policy</a>
                <a href="https://rojgarsangam.in/editorial-policy/" class="footer-link">Editorial Policy</a>
                <a href="https://rojgarsangam.in/cookies-policy/" class="footer-link">Cookies Policy</a>
                <a href="https://rojgarsangam.in/terms-conditions/" class="footer-link">Terms & Conditions</a>
                <a href="https://rojgarsangam.in/disclaimer/" class="footer-link">Disclaimer</a>
            </div>

            <div>
                <h4 class="text-white font-bold text-lg mb-4 border-l-4 border-blue-500 pl-3">Quick Links</h4>
                <a href="https://rojgarsangam.in/" class="footer-link">Home</a>
                <a href="https://rojgarsangam.in/about-us/" class="footer-link">About Us</a>
                <a href="https://rojgarsangam.in/contact-us/" class="footer-link">Contact Us</a>
            </div>

            <div>
                <h4 class="text-white font-bold text-lg mb-4 border-l-4 border-blue-500 pl-3">Follow Us</h4>
                <div class="flex flex-wrap gap-2">
                    <a href="https://x.com/rojgarsangam" class="social-btn bg-black"><i class="fab fa-twitter"></i></a>
                    <a href="https://t.me/rojgarsangamin" class="social-btn bg-blue-500"><i class="fab fa-telegram"></i></a>
                    <a href="https://aratt.ai/@rojgarsangam" class="social-btn bg-green-600" title="Arattai">A</a>
                    <a href="https://www.whatsapp.com/channel/0029VaAiVAIKwqSJx6uXtM3L" class="social-btn bg-green-500"><i class="fab fa-whatsapp"></i></a>
                    <a href="https://mastodon.social/@rojgarsangam" class="social-btn bg-purple-600"><i class="fab fa-mastodon"></i></a>
                </div>
                <p class="mt-6 text-xs text-gray-500">Â© 2026 RojgarSangam.in</p>
            </div>
        </div>
    </footer>
    <script>
        // --- 1. NAVIGATION LOGIC ---
        function showHome() {
            document.getElementById('home-view').classList.remove('hidden');
            document.querySelectorAll('.tool-container').forEach(el => el.classList.add('hidden'));
            window.scrollTo(0, 0);
        }

        function openTool(toolId) {
            document.getElementById('home-view').classList.add('hidden');
            document.querySelectorAll('.tool-container').forEach(el => el.classList.add('hidden'));
            const target = document.getElementById('tool-' + toolId);
            if(target) {
                target.classList.remove('hidden');
                window.scrollTo(0, 0);
            } else {
                alert("Tool " + toolId + " is coming soon!");
                showHome();
            }
            
            // Init special values
            if(toolId === 'age-calculator') {
                document.getElementById('ac-target').valueAsDate = new Date();
            }
        }

        // --- 2. RESUME MAKER (PRINT LOGIC) ---
        // Sync inputs to print layout on change
        ['rm-name', 'rm-mobile', 'rm-email', 'rm-address', 'rm-obj', 'rm-edu'].forEach(id => {
            document.getElementById(id).addEventListener('input', function() {
                const map = {
                    'rm-name': 'p-name',
                    'rm-mobile': 'p-contact',
                    'rm-email': 'p-contact',
                    'rm-address': 'p-contact',
                    'rm-obj': 'p-obj',
                    'rm-edu': 'p-edu'
                };
                // Special handling for contact line
                if (id === 'rm-name' |

| id === 'rm-obj' |
| id === 'rm-edu') {
                    document.getElementById(map[id]).innerText = this.value;
                } else {
                    const mob = document.getElementById('rm-mobile').value;
                    const eml = document.getElementById('rm-email').value;
                    const addr = document.getElementById('rm-address').value;
                    document.getElementById('p-contact').innerText = `Mobile: ${mob} | Email: ${eml}\nAddress: ${addr}`;
                }
            });
        });

        // --- 3. IMAGE RESIZER ---
        function resizeImage() {
            const file = document.getElementById('ir-file').files;
            const w = document.getElementById('ir-w').value;
            const h = document.getElementById('ir-h').value;
            if(!file) return alert("Select Image");
            
            const r = new FileReader(); r.readAsDataURL(file);
            r.onload = e => {
                const img = new Image(); img.src = e.target.result;
                img.onload = () => {
                    const c = document.createElement('canvas'); c.width = w; c.height = h;
                    c.getContext('2d').drawImage(img, 0, 0, w, h);
                    const l = document.createElement('a');
                    l.download = 'resized.jpg';
                    l.href = c.toDataURL('image/jpeg', 0.9);
                    l.click();
                }
            }
        }

        // --- 4. MERGE PDF ---
        async function mergePDFs() {
            const files = document.getElementById('mp-files').files;
            if(files.length < 2) return alert("Select at least 2 PDFs");
            const { PDFDocument } = PDFLib;
            const doc = await PDFDocument.create();
            for(let f of files) {
                const buff = await f.arrayBuffer();
                const pdf = await PDFDocument.load(buff);
                const pages = await doc.copyPages(pdf, pdf.getPageIndices());
                pages.forEach(p => doc.addPage(p));
            }
            const b = await doc.save();
            downloadBlob(b, 'merged.pdf', 'application/pdf');
        }

        // --- 5. SPLIT PDF ---
        async function splitPDF() {
            const file = document.getElementById('sp-file').files;
            if(!file) return alert("Select PDF");
            const { PDFDocument } = PDFLib;
            const buff = await file.arrayBuffer();
            const src = await PDFDocument.load(buff);
            const doc = await PDFDocument.create();
            // Just extracting 1st page as example logic
            const [p] = await doc.copyPages(src, ); 
            doc.addPage(p);
            const b = await doc.save();
            downloadBlob(b, 'split-page-1.pdf', 'application/pdf');
            alert("Page 1 Split & Downloaded!");
        }

        // --- 6. COMPRESS PDF ---
        async function compressPDF() {
            // Client side compression is limited. We recreate the PDF which cleans metadata.
            const file = document.getElementById('cp-file').files;
            if(!file) return alert("Select PDF");
            const { PDFDocument } = PDFLib;
            const buff = await file.arrayBuffer();
            const pdf = await PDFDocument.load(buff);
            const b = await pdf.save({ useObjectStreams: false }); 
            downloadBlob(b, 'compressed.pdf', 'application/pdf');
        }

        // --- 7. WORD TO PDF ---
        function wordToPdf() {
            const file = document.getElementById('wp-file').files;
            if(!file) return alert("Select DOCX");
            
            const reader = new FileReader();
            reader.onload = function(e) {
                mammoth.convertToHtml({arrayBuffer: e.target.result})
               .then(displayResult)
               .catch(handleError);
            };
            reader.readAsArrayBuffer(file);

            function displayResult(result) {
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF();
                // Simple text extraction for PDF
                const text = result.value.replace(/<[^>]*>?/gm, ''); // Strip HTML tags
                const splitText = doc.splitTextToSize(text, 180);
                doc.text(splitText, 10, 10);
                doc.save('converted.pdf');
            }
            function handleError(err) { console.log(err); alert("Error converting file"); }
        }

        // --- 8. PDF TO JPG ---
        async function pdfToJpg() {
            const file = document.getElementById('pj-file').files;
            if(!file) return alert("Select PDF");
            
            const uri = URL.createObjectURL(file);
            const pdf = await pdfjsLib.getDocument(uri).promise;
            const page = await pdf.getPage(1); // Get 1st page
            
            const scale = 1.5;
            const viewport = page.getViewport({scale: scale});
            const canvas = document.createElement('canvas');
            const context = canvas.getContext('2d');
            canvas.height = viewport.height;
            canvas.width = viewport.width;

            await page.render({canvasContext: context, viewport: viewport}).promise;
            
            const link = document.createElement('a');
            link.download = 'page-1.jpg';
            link.href = canvas.toDataURL('image/jpeg');
            link.click();
        }

        // --- 9. JPG TO PDF ---
        async function jpgToPdf() {
            const files = document.getElementById('jp-files').files;
            if(!files.length) return alert("Select Images");
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            for(let i=0; i<files.length; i++) {
                const d = await readFile(files[i]);
                if(i>0) doc.addPage();
                doc.addImage(d, 'JPEG', 10, 10, 180, 0);
            }
            doc.save('images.pdf');
        }

        // --- 10. REMOVE BACKGROUND ---
        async function removeBg() {
            // Lazy load imgly only when needed
            if(!window.imglyRemoveBackground) {
                alert("Loading AI Model (Approx 30MB). Please wait...");
                const module = await import('https://cdn.jsdelivr.net/npm/@imgly/background-removal/+esm');
                window.imglyRemoveBackground = module.default;
            }
            const file = document.getElementById('rb-file').files;
            if(!file) return alert("Select Image");
            
            window.imglyRemoveBackground(file).then(blob => {
                const url = URL.createObjectURL(blob);
                const img = document.getElementById('rb-result');
                img.src = url;
                img.classList.remove('hidden');
            });
        }

        // --- 11. PHOTO JOINER ---
        function joinPhotos() {
            const f1 = document.getElementById('pj-photo').files;
            const f2 = document.getElementById('pj-sign').files;
            if(!f1 ||!f2) return alert("Select both files");
            
            Promise.all([readFile(f1), readFile(f2)]).then(res => {
                const i1 = new Image(); i1.src = res;
                const i2 = new Image(); i2.src = res[1];
                let loaded = 0;
                const draw = () => {
                    loaded++; if(loaded<2) return;
                    const c = document.getElementById('pj-canvas');
                    const ctx = c.getContext('2d');
                    c.width = 350; c.height = 450;
                    ctx.fillStyle = "white"; ctx.fillRect(0,0,350,450);
                    // Draw Photo
                    ctx.drawImage(i1, 0, 0, 350, 350);
                    // Draw Sign
                    ctx.drawImage(i2, 50, 360, 250, 80);
                    c.classList.remove('hidden');
                    const l = document.createElement('a'); l.download='joined.jpg';
                    l.href = c.toDataURL(); l.click();
                };
                i1.onload = draw; i2.onload = draw;
            });
        }

        // --- 12. NAME & DATE ---
        function addNameDate() {
            const f = document.getElementById('nd-file').files;
            const name = document.getElementById('nd-name').value;
            const date = document.getElementById('nd-date').value;
            if(!f) return alert("Select Photo");
            
            const r = new FileReader(); r.readAsDataURL(f);
            r.onload = e => {
                const img = new Image(); img.src = e.target.result;
                img.onload = () => {
                    const c = document.getElementById('nd-canvas');
                    const ctx = c.getContext('2d');
                    c.width = img.width; c.height = img.height + (img.height * 0.15);
                    ctx.fillStyle="white"; ctx.fillRect(0,0,c.width,c.height);
                    ctx.drawImage(img, 0, 0);
                    
                    // Strip
                    ctx.fillStyle="white"; ctx.fillRect(0, img.height, c.width, c.height-img.height);
                    ctx.fillStyle="black"; ctx.textAlign="center"; 
                    ctx.font=`bold ${c.height*0.04}px Arial`;
                    ctx.fillText(name, c.width/2, img.height + (c.height*0.06));
                    ctx.fillText(date, c.width/2, img.height + (c.height*0.12));
                    
                    c.classList.remove('hidden');
                    const l = document.createElement('a'); l.download='named.jpg';
                    l.href=c.toDataURL(); l.click();
                }
            }
        }

        // --- 13. AGE CALCULATOR ---
        function calculateAge() {
            const d1 = new Date(document.getElementById('ac-dob').value);
            const d2 = new Date(document.getElementById('ac-target').value);
            if(!d1.getTime()) return alert("Enter DOB");
            
            let y = d2.getFullYear() - d1.getFullYear();
            let m = d2.getMonth() - d1.getMonth();
            let d = d2.getDate() - d1.getDate();
            
            if(d<0){ m--; d+=new Date(d2.getFullYear(), d2.getMonth(), 0).getDate(); }
            if(m<0){ y--; m+=12; }
            
            const res = document.getElementById('ac-result');
            res.innerText = `You are ${y} Years, ${m} Months, and ${d} Days old.`;
            res.classList.remove('hidden');
        }

        // --- HELPERS ---
        function readFile(file) {
            return new Promise(r => {
                const reader = new FileReader();
                reader.onload = e => r(e.target.result);
                reader.readAsDataURL(file);
            });
        }
        function downloadBlob(data, name, type) {
            const blob = new Blob([data], {type});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href=url; a.download=name; a.click();
        }

    </script>
</body>
</html>
