<!DOCTYPE html>
<html lang="en-GB">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Name and DOB on Photo Online Free - Photo with Name Strip</title>
    <meta name="description" content="Add Name and DOB on Photo Online Free. Write Name, Date of Birth and Date of Photograph on any Photo with White Strip. Download as JPG. No App Required.">
    <meta name="keywords" content="add name on photo, add dob on photo, write name on photo online, photo with name strip, name dob photo maker, passport photo name">
    <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
    <link rel="canonical" href="https://tools.rojgarsangam.in/tools/name-dob-on-photo.html">
    <link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <script type="application/ld+json">{"@context":"https://schema.org","@type":"WebApplication","name":"Add Name and DOB on Photo Online Free","url":"https://tools.rojgarsangam.in/tools/name-dob-on-photo.html","description":"Add Name, Date of Birth and Date of Photograph on Photo Online Free.","applicationCategory":"UtilitiesApplication","operatingSystem":"Any","offers":{"@type":"Offer","price":"0","priceCurrency":"USD"}}</script>
    <script type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https://tools.rojgarsangam.in/"},{"@type":"ListItem","position":2,"name":"Tools","item":"https://tools.rojgarsangam.in/tools/"},{"@type":"ListItem","position":3,"name":"Add Name DOB on Photo","item":"https://tools.rojgarsangam.in/tools/name-dob-on-photo.html"}]}</script>
    <script type="application/ld+json">{"@context":"https://schema.org","@type":"FAQPage","mainEntity":[{"@type":"Question","name":"How to Add Name and DOB on Photo?","acceptedAnswer":{"@type":"Answer","text":"Upload your photo, enter your name and date, select image size and click Generate Photo. Download the result instantly."}},{"@type":"Question","name":"Which Image Sizes Are Available?","acceptedAnswer":{"@type":"Answer","text":"Passport Photo, UPSC/SSC/Bank Photo, Railway/Police Photo, Stamp Size, Custom Size and Original Size are available."}},{"@type":"Question","name":"Is My Photo Safe?","acceptedAnswer":{"@type":"Answer","text":"Yes, all processing happens locally in your browser. Your photo is never uploaded to any server."}},{"@type":"Question","name":"Can I Use This for Government Forms?","acceptedAnswer":{"@type":"Answer","text":"Yes, this tool is designed for government form photos that require name and date of birth written below the photograph."}}]}</script>
    <script type="application/ld+json">{"@context":"https://schema.org","@type":"HowTo","name":"How to Add Name and DOB on Photo","step":[{"@type":"HowToStep","position":1,"name":"Upload Photo","text":"Click Upload and select your photo."},{"@type":"HowToStep","position":2,"name":"Enter Details","text":"Enter your full name and date."},{"@type":"HowToStep","position":3,"name":"Select Size","text":"Choose image size as required by the form."},{"@type":"HowToStep","position":4,"name":"Download","text":"Click Generate Photo and download the result."}]}</script>

    <style>
        body{font-family:'Lora',serif!important;background:#f8f8ff;color:#333}
        #header-placeholder{background-color:#fff!important;width:100%;display:block;position:relative;z-index:1000}
        .section-main{margin:40px 0px 40px 0px!important}
        .tool-wrapper{background:#fff;border-radius:20px;padding:40px 40px 40px 40px;box-shadow:0px 4px 20px rgba(0,0,0,0.08);border:1px solid #667799}
        .upload-area{border:3px dashed #667799;border-radius:16px;padding:48px 20px 48px 20px;text-align:center;cursor:pointer;background:#f8f8ff;transition:all .3s;max-width:100%;margin:0px 0px 0px 0px}
        .upload-area:hover,.upload-area.dragover{border-color:#00079e;background:#fdece5}
        .upload-area-icon{font-size:40px;color:#00079e;margin:0px 0px 14px 0px}
        .upload-area-text{font-size:17px;font-weight:700;color:#333;margin:0px 0px 6px 0px}
        .upload-area-sub{font-size:13px;color:#667799;margin:0px 0px 0px 0px}
        .workspace-container{display:none}
        .workspace-container.active{display:flex;gap:30px;margin:30px 0px 0px 0px;align-items:flex-start}
        .preview-panel{flex:1;background:#fff;border-radius:12px;border:1px solid #667799;padding:20px 20px 20px 20px;display:flex;flex-direction:column;align-items:center}
        .preview-img-wrap{width:100%;border-radius:8px;border:1px solid #bdbdbd;overflow:hidden;background-image:linear-gradient(45deg,#bdbdbd 25%,transparent 25%),linear-gradient(-45deg,#bdbdbd 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#bdbdbd 75%),linear-gradient(-45deg,transparent 75%,#bdbdbd 75%);background-size:20px 20px;background-position:0 0,0 10px,10px -10px,-10px 0;background-color:#f8f8ff;display:flex;align-items:center;justify-content:center;min-height:200px}
        .preview-img-wrap img{max-width:100%;max-height:400px;display:block;object-fit:contain}
        .img-info{width:100%;margin:14px 0px 0px 0px;display:flex;gap:8px;flex-wrap:wrap}
        .info-badge{background:#eff6ef;border:1px solid #667799;border-radius:6px;padding:5px 10px 5px 10px;font-size:12px;font-weight:700;color:#333}
        .info-badge span{color:#00079e}
        .controls-panel{width:400px;background:#fff;border:1px solid #667799;border-radius:12px;padding:25px 25px 25px 25px;height:fit-content;position:sticky;top:100px;display:flex;flex-direction:column}
        .controls-panel h2{font-size:22px;font-weight:900;color:#333;margin:0px 0px 5px 0px}
        .controls-subtitle{font-size:14px;color:#00079e;background:#eff6ef;padding:6px 10px 6px 10px;border-radius:6px;border:1px solid #667799;margin:0px 0px 20px 0px;display:inline-block}
        .form-group{margin:0px 0px 18px 0px}
        .form-group label{display:flex;align-items:center;gap:7px;font-size:13px;font-weight:700;color:#333;margin:0px 0px 8px 0px}
        .form-group label i{color:#00079e;font-size:13px}
        .form-input{width:100%;padding:11px 14px 11px 14px;border:2px solid #bdbdbd;border-radius:8px;font-size:14px;font-family:'Lora',serif;color:#333;background:#f8f8ff;box-sizing:border-box;transition:border .2s}
        .form-input:focus{outline:none;border-color:#00079e;background:#fff}
        .form-input.uppercase-input{text-transform:uppercase}
        .form-select{width:100%;padding:11px 14px 11px 14px;border:2px solid #bdbdbd;border-radius:8px;font-size:13px;font-family:'Lora',serif;color:#333;background:#f8f8ff;box-sizing:border-box;cursor:pointer;transition:border .2s}
        .form-select:focus{outline:none;border-color:#00079e}
        .date-input{width:100%;padding:11px 14px 11px 14px;border:2px solid #bdbdbd;border-radius:8px;font-size:14px;font-family:'Lora',serif;color:#333;background:#f8f8ff;box-sizing:border-box;transition:border .2s;cursor:pointer;user-select:none}
        .date-input:focus{outline:none;border-color:#00079e;background:#fff}
        .kb-btn{padding:8px 4px 8px 4px;background:#f8f8ff;border:2px solid #bdbdbd;border-radius:8px;font-size:12px;font-weight:700;color:#333;cursor:pointer;font-family:'Lora',serif;transition:all .2s;text-align:center}
        .kb-btn:hover,.kb-btn.active{background:#eff6ef;border-color:#00079e;color:#00079e}
        .divider{height:1px;background:#bdbdbd;margin:18px 0px 18px 0px}
        .generate-btn{width:100%;padding:16px 0px 16px 0px;background:#00079e;color:#fff;border:none;border-radius:50px;font-size:16px;font-weight:700;cursor:pointer;margin:8px 0px 0px 0px;transition:all .3s;font-family:'Lora',serif;display:flex;align-items:center;justify-content:center;gap:8px}
        .generate-btn:hover{background:#333;transform:translateY(-2px)}
        .result-container{display:none}
        .result-container.active{display:flex;gap:30px;margin:30px 0px 0px 0px;align-items:flex-start}
        .result-canvas-wrap{flex:1;background:#fff;border-radius:12px;border:1px solid #667799;padding:20px 20px 20px 20px;display:flex;flex-direction:column;align-items:center}
        #outputCanvas{max-width:100%;height:auto;display:block;border:2px solid #bdbdbd;border-radius:4px}
        .result-info-panel{width:400px;background:#fff;border:1px solid #667799;border-radius:12px;padding:25px 25px 25px 25px;height:fit-content;position:sticky;top:100px}
        .result-success{text-align:center;margin:0px 0px 22px 0px}
        .result-icon{font-size:52px;color:#00c853;margin:0px 0px 10px 0px}
        .result-title{font-size:22px;font-weight:900;color:#333;margin:0px 0px 5px 0px}
        .result-sub{font-size:13px;color:#667799;margin:0px 0px 0px 0px}
        .result-stats{display:flex;flex-direction:column;gap:10px;margin:0px 0px 22px 0px}
        .stat-row{display:flex;justify-content:space-between;align-items:center;padding:10px 14px 10px 14px;background:#f8f8ff;border:1px solid #bdbdbd;border-radius:8px}
        .stat-label{font-size:12px;color:#667799;font-weight:700}
        .stat-value{font-size:12px;color:#00079e;font-weight:700}
        .download-btn{width:100%;padding:16px 0px 16px 0px;background:#eff6ef;color:#00079e;border:1px solid #667799;border-radius:50px;font-size:16px;font-weight:700;cursor:pointer;transition:all .3s;font-family:'Lora',serif;display:flex;align-items:center;justify-content:center;gap:8px}
        .download-btn:hover{background:#fdece5;transform:translateY(-2px)}
        .reset-btn{width:100%;padding:12px 0px 12px 0px;background:#f8f8ff;color:#667799;border:1px solid #bdbdbd;border-radius:50px;font-size:14px;font-weight:700;cursor:pointer;margin:10px 0px 0px 0px;transition:all .3s;font-family:'Lora',serif;display:flex;align-items:center;justify-content:center;gap:8px}
        .reset-btn:hover{background:#fdece5;color:#00079e;border-color:#00079e}
        .error-msg{display:none;background:#fdece5;border:1px solid #e53935;border-radius:8px;padding:10px 16px 10px 16px;font-size:13px;font-weight:700;color:#e53935;margin:0px 0px 16px 0px}
        .error-msg.show{display:block}
        .processing-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(248,248,255,0.95);display:none;align-items:center;justify-content:center;z-index:9999}
        .processing-overlay.active{display:flex}
        .processing-box{background:#fff;border-radius:20px;padding:50px 50px 50px 50px;text-align:center;max-width:420px;width:90%;border:1px solid #667799;box-shadow:0px 20px 60px rgba(0,0,0,0.15)}
        .processing-icon{font-size:60px;color:#00079e;margin:0px 0px 20px 0px;animation:spin 1s linear infinite}
        @keyframes spin{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}
        .processing-title{font-size:24px;font-weight:900;color:#333;margin:0px 0px 10px 0px}
        .processing-text{font-size:14px;color:#00079e;background:#eff6ef;padding:10px 15px 10px 15px;border-radius:8px;border:1px solid #667799;font-weight:700;margin:0px 0px 0px 0px}
        #footer-placeholder{border:1px solid #667799!important;width:100%;display:block;position:relative}
        @media(max-width:1024px){.workspace-container.active,.result-container.active{flex-direction:column}.controls-panel,.result-info-panel{width:100%;position:static}}
        @media(max-width:600px){.tool-wrapper{padding:22px 18px 22px 18px}}
    </style>
</head>
<body>
    <div id="header-placeholder"></div>

    <section class="section" style="margin:50px 0px 0px 0px!important">
        <div class="row-container">
            <div class="ad-manager-placeholder ad-leaderboard" data-ad-type="leaderboard"></div>
        </div>
    </section>

    <section class="section-main">
        <div class="row-container">
            <div style="text-align:center;margin:0px 0px 30px 0px">
                <h1 style="font-size:36px;font-weight:900;color:#333;margin:0px 0px 10px 0px">Add Name and DOB on Photo Online Free</h1>
                <p style="font-size:16px;color:#333;margin:0px 0px 0px 0px">Write Name, Date of Birth and Date of Photograph on any Photo. Choose Standard Sizes for Government Forms. Download Instantly.</p>
            </div>

            <div class="tool-wrapper">

                <div id="uploadArea" class="upload-area">
                    <div class="upload-area-icon"><i class="fas fa-portrait"></i></div>
                    <div class="upload-area-text">+ Upload Photo</div>
                    <div class="upload-area-sub">Click or Drop — JPG, PNG, WebP Supported</div>
                    <input type="file" id="fileInput" accept="image/jpeg,image/png,image/webp" style="display:none">
                </div>

                <div id="workspace" class="workspace-container">
                    <div class="preview-panel">
                        <div class="preview-img-wrap">
                            <img id="originalPreview" src="" alt="Uploaded Photo Preview">
                        </div>
                        <div class="img-info">
                            <div class="info-badge">Size: <span id="origSize">-</span></div>
                            <div class="info-badge">Dimensions: <span id="origDims">-</span></div>
                        </div>
                    </div>

                    <div class="controls-panel">
                        <h2>Add Name & DOB</h2>
                        <div class="controls-subtitle">Fill Details Below</div>

                        <div id="errorMsg" class="error-msg"><i class="fas fa-exclamation-circle"></i> <span id="errorText"></span></div>

                        <div class="form-group">
                            <label><i class="fas fa-user"></i> Full Name</label>
                            <input type="text" id="nameInput" class="form-input uppercase-input" placeholder="SANJEEV KUMAR">
                        </div>

                        <div class="form-group">
                            <label><i class="fas fa-birthday-cake"></i> Date of Birth (DOB) & Date of Photograph</label>
                            <input type="date" id="dobInput" class="date-input">
                        </div>

                        <div class="divider"></div>

                        <div class="form-group" style="margin:0px 0px 0px 0px">
                            <label><i class="fas fa-expand-arrows-alt"></i> Output Image Size</label>
                            <select id="sizeSelect" class="form-select">
                                <option value="original">Original Size (As Uploaded)</option>
                                <optgroup label="Government Forms">
                                    <option value="413x531">Passport Photo (413×531 px)</option>
                                    <option value="200x230">UPSC / SSC / Bank Photo (200×230 px)</option>
                                    <option value="400x500">Railway / Police Photo (400×500 px)</option>
                                    <option value="200x200">Stamp Size Photo (200×200 px)</option>
                                </optgroup>
                                <optgroup label="Signature">
                                    <option value="140x60">Standard Signature (140×60 px)</option>
                                    <option value="200x80">Wide Signature (200×80 px)</option>
                                </optgroup>
                                <optgroup label="Social Media">
                                    <option value="800x800">WhatsApp DP (800×800 px)</option>
                                    <option value="1080x1080">Instagram Post (1080×1080 px)</option>
                                </optgroup>
                                <optgroup label="Print Sizes">
                                    <option value="1200x1800">4R Print (1200×1800 px)</option>
                                    <option value="2480x3508">A4 Print (2480×3508 px)</option>
                                </optgroup>
                                <option value="custom">Custom Size (Enter Manually)</option>
                            </select>
                        </div>

                        <div id="customSizeRow" style="display:none;margin:14px 0px 18px 0px">
                            <div style="display:flex;gap:12px">
                                <div class="form-group" style="margin:0px 0px 0px 0px;flex:1">
                                    <label><i class="fas fa-arrows-alt-h"></i> Width (px)</label>
                                    <input type="number" id="customW" class="form-input" placeholder="e.g. 600" min="1">
                                </div>
                                <div class="form-group" style="margin:0px 0px 0px 0px;flex:1">
                                    <label><i class="fas fa-arrows-alt-v"></i> Height (px)</label>
                                    <input type="number" id="customH" class="form-input" placeholder="e.g. 800" min="1">
                                </div>
                            </div>
                        </div>

                        <div class="form-group" style="margin:14px 0px 10px 0px">
                            <label><i class="fas fa-file-image"></i> Target File Size (Optional)</label>
                            <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:8px;margin:0px 0px 10px 0px">
                                <button class="kb-btn" data-kb="10">10 KB</button>
                                <button class="kb-btn" data-kb="20">20 KB</button>
                                <button class="kb-btn" data-kb="30">30 KB</button>
                                <button class="kb-btn" data-kb="50">50 KB</button>
                                <button class="kb-btn" data-kb="100">100 KB</button>
                                <button class="kb-btn" data-kb="120">120 KB</button>
                                <button class="kb-btn" data-kb="150">150 KB</button>
                                <button class="kb-btn" data-kb="200">200 KB</button>
                            </div>
                            <input type="number" id="customKbInput" class="form-input" placeholder="Or enter custom KB e.g. 75" min="1">
                        </div>

                        <button class="generate-btn" id="generateBtn">
                            <i class="fas fa-magic"></i> Generate Photo
                        </button>
                    </div>
                </div>

                <div id="resultSection" class="result-container">
                    <div class="result-canvas-wrap">
                        <canvas id="outputCanvas"></canvas>
                        <div class="img-info" style="margin:14px 0px 0px 0px">
                            <div class="info-badge">Output Size: <span id="outSize">-</span></div>
                            <div class="info-badge">Dimensions: <span id="outDims">-</span></div>
                        </div>
                    </div>

                    <div class="result-info-panel">
                        <div class="result-success">
                            <div class="result-icon"><i class="fas fa-check-circle"></i></div>
                            <div class="result-title">Photo Ready!</div>
                            <div class="result-sub">Name and DOB added successfully.</div>
                        </div>
                        <div class="result-stats">
                            <div class="stat-row"><span class="stat-label">Name</span><span class="stat-value" id="statName">-</span></div>
                            <div class="stat-row"><span class="stat-label">DOB & Date</span><span class="stat-value" id="statDOB">-</span></div>
                            <div class="stat-row"><span class="stat-label">Output Dimensions</span><span class="stat-value" id="statDims">-</span></div>
                            <div class="stat-row"><span class="stat-label">File Size</span><span class="stat-value" id="statFileSize">-</span></div>
                        </div>
                        <button class="download-btn" id="downloadBtn"><i class="fas fa-download"></i> Download Photo</button>
                        <button class="reset-btn" id="createNewBtn"><i class="fas fa-redo"></i> Create New Photo</button>
                    </div>
                </div>

            </div>
        </div>
    </section>

    <section class="section-container" style="margin:40px 0px 40px 0px!important;padding:0px 0px 0px 0px!important">
        <div class="row-container">
            <h2 style="font-weight:900;margin:0px 0px 25px 0px!important;text-align:center!important;color:#333">How to Add Name and DOB on Photo</h2>
            <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:20px;margin:0px 0px 0px 0px">
                <div style="background:#fff;border:1px solid #667799;border-radius:12px;padding:24px 20px 24px 20px;text-align:center"><div style="font-size:36px;color:#00079e;margin:0px 0px 12px 0px"><i class="fas fa-upload"></i></div><div style="font-size:16px;font-weight:700;color:#333;margin:0px 0px 8px 0px">Step 1: Upload Photo</div><div style="font-size:13px;color:#667799">Click Upload or drag and drop your photo in JPG, PNG or WebP format.</div></div>
                <div style="background:#fff;border:1px solid #667799;border-radius:12px;padding:24px 20px 24px 20px;text-align:center"><div style="font-size:36px;color:#00079e;margin:0px 0px 12px 0px"><i class="fas fa-keyboard"></i></div><div style="font-size:16px;font-weight:700;color:#333;margin:0px 0px 8px 0px">Step 2: Enter Details</div><div style="font-size:13px;color:#667799">Enter your full name and date of birth along with date of photograph.</div></div>
                <div style="background:#fff;border:1px solid #667799;border-radius:12px;padding:24px 20px 24px 20px;text-align:center"><div style="font-size:36px;color:#00079e;margin:0px 0px 12px 0px"><i class="fas fa-expand-arrows-alt"></i></div><div style="font-size:16px;font-weight:700;color:#333;margin:0px 0px 8px 0px">Step 3: Select Size</div><div style="font-size:13px;color:#667799">Choose output size and target file size in KB as required by your form.</div></div>
                <div style="background:#fff;border:1px solid #667799;border-radius:12px;padding:24px 20px 24px 20px;text-align:center"><div style="font-size:36px;color:#00079e;margin:0px 0px 12px 0px"><i class="fas fa-download"></i></div><div style="font-size:16px;font-weight:700;color:#333;margin:0px 0px 8px 0px">Step 4: Download</div><div style="font-size:13px;color:#667799">Click Generate Photo, preview the result and download as JPG.</div></div>
            </div>
        </div>
    </section>

    <section class="section-container" style="margin:40px 0px 40px 0px!important;padding:0px 0px 0px 0px!important">
        <div class="row-container">
            <h2 style="font-weight:900;margin:0px 0px 25px 0px!important;text-align:center!important;color:#333">Frequently Asked Questions</h2>
            <div class="faq-list">
                <div class="faq-item"><div class="faq-question" onclick="toggleFAQ(this)"><span>How to Add Name and DOB on Photo?</span><i class="faq-icon">+</i></div><div class="faq-answer"><p>Upload your photo, enter your full name and date, select the required image size and click Generate Photo. Download the result instantly.</p></div></div>
                <div class="faq-item"><div class="faq-question" onclick="toggleFAQ(this)"><span>Which Image Sizes Are Available?</span><i class="faq-icon">+</i></div><div class="faq-answer"><p>Passport Photo, UPSC/SSC/Bank Photo, Railway/Police Photo, Stamp Size, Custom Size and Original Size are all available for different form requirements.</p></div></div>
                <div class="faq-item"><div class="faq-question" onclick="toggleFAQ(this)"><span>Is My Photo Safe and Private?</span><i class="faq-icon">+</i></div><div class="faq-answer"><p>Yes, all processing happens locally in your browser. Your photo is never uploaded to any server and remains completely private on your device.</p></div></div>
                <div class="faq-item"><div class="faq-question" onclick="toggleFAQ(this)"><span>Can I Compress Photo to a Specific KB?</span><i class="faq-icon">+</i></div><div class="faq-answer"><p>Yes, select a target file size like 20KB, 50KB or 100KB from the buttons or enter a custom KB value. The tool automatically adjusts quality to match your target.</p></div></div>
                <div class="faq-item"><div class="faq-question" onclick="toggleFAQ(this)"><span>Can I Use This for Government Forms?</span><i class="faq-icon">+</i></div><div class="faq-answer"><p>Yes, this tool is specifically designed for government form photos that require the candidate's name and date of birth written below the photograph.</p></div></div>
            </div>
        </div>
    </section>

    <section class="section-main">
        <div class="row-custom">
            <div class="ad-manager-placeholder" data-ad-type="responsive"></div>
        </div>
    </section>

    <div id="processingOverlay" class="processing-overlay">
        <div class="processing-box">
            <div class="processing-icon"><i class="fas fa-cog"></i></div>
            <div class="processing-title">Generating Photo</div>
            <div class="processing-text">Please Wait. Adding Name and DOB on Your Photo...</div>
        </div>
    </div>

    <div id="footer-placeholder"></div>
    <script src="../js/ad-manager.js"></script>
    <script src="../js/main.js"></script>

    <script>
    let loadedImg      = null;
    let originalSizeKB = 0;
    let selectedKB     = null;

    const uploadArea        = document.getElementById('uploadArea');
    const fileInput         = document.getElementById('fileInput');
    const workspace         = document.getElementById('workspace');
    const resultSection     = document.getElementById('resultSection');
    const processingOverlay = document.getElementById('processingOverlay');
    const originalPreview   = document.getElementById('originalPreview');
    const outputCanvas      = document.getElementById('outputCanvas');
    const errorMsg          = document.getElementById('errorMsg');
    const errorText         = document.getElementById('errorText');
    const dobInput          = document.getElementById('dobInput');

    document.querySelectorAll('.date-input').forEach(inp => {
        inp.addEventListener('click', function () {
            try { this.showPicker(); } catch(e) { this.focus(); }
        });
    });

    document.getElementById('sizeSelect').addEventListener('change', function () {
        document.getElementById('customSizeRow').style.display = this.value === 'custom' ? 'block' : 'none';
    });

    document.querySelectorAll('.kb-btn').forEach(btn => {
        btn.addEventListener('click', function () {
            document.querySelectorAll('.kb-btn').forEach(b => b.classList.remove('active'));
            this.classList.add('active');
            selectedKB = parseInt(this.dataset.kb);
            document.getElementById('customKbInput').value = '';
        });
    });
    document.getElementById('customKbInput').addEventListener('input', () => {
        document.querySelectorAll('.kb-btn').forEach(b => b.classList.remove('active'));
        selectedKB = null;
    });

    uploadArea.addEventListener('click',     () => fileInput.click());
    fileInput.addEventListener('change',     e => { if (e.target.files[0]) loadPhoto(e.target.files[0]); fileInput.value = ''; });
    uploadArea.addEventListener('dragover',  e => { e.preventDefault(); uploadArea.classList.add('dragover'); });
    uploadArea.addEventListener('dragleave', () => uploadArea.classList.remove('dragover'));
    uploadArea.addEventListener('drop', e => {
        e.preventDefault();
        uploadArea.classList.remove('dragover');
        const f = Array.from(e.dataTransfer.files).find(f => /^image\/(jpeg|png|webp)$/.test(f.type));
        if (f) loadPhoto(f);
        else alert('Please Upload a Valid JPG, PNG or WebP File.');
    });

    function loadPhoto(file) {
        originalSizeKB = file.size / 1024;
        const reader   = new FileReader();
        reader.onload  = ev => {
            loadedImg        = new Image();
            loadedImg.onload = () => {
                originalPreview.src = ev.target.result;
                document.getElementById('origSize').textContent = fmtKB(originalSizeKB);
                document.getElementById('origDims').textContent = loadedImg.naturalWidth + '×' + loadedImg.naturalHeight + ' px';
                uploadArea.style.display = 'none';
                resultSection.classList.remove('active');
                workspace.classList.add('active');
            };
            loadedImg.src = ev.target.result;
        };
        reader.readAsDataURL(file);
    }

    function fmtKB(kb) {
        if (kb >= 1024) return (kb / 1024).toFixed(2) + ' MB';
        return kb.toFixed(1) + ' KB';
    }

    function fmtDate(val) {
        if (!val) return '';
        const [y, m, d] = val.split('-');
        return d + '/' + m + '/' + y;
    }

    function showError(msg) { errorText.textContent = msg; errorMsg.classList.add('show'); }
    function hideError()    { errorMsg.classList.remove('show'); }

    document.getElementById('nameInput').addEventListener('input', function () {
        this.value = this.value.toUpperCase();
    });

    document.getElementById('generateBtn').addEventListener('click', async () => {
        hideError();
        const name    = document.getElementById('nameInput').value.trim().toUpperCase();
        const dobVal  = dobInput.value;
        const sizeVal = document.getElementById('sizeSelect').value;

        if (!name)   { showError('Please enter Full Name.'); return; }
        if (!dobVal) { showError('Please select Date of Birth & Date of Photograph.'); return; }

        if (sizeVal === 'custom') {
            const cw = parseInt(document.getElementById('customW').value);
            const ch = parseInt(document.getElementById('customH').value);
            if (!cw || !ch) { showError('Please enter Custom Width and Height.'); return; }
        }

        processingOverlay.classList.add('active');
        await new Promise(r => setTimeout(r, 80));

        try {
            let imgW = loadedImg.naturalWidth;
            let imgH = loadedImg.naturalHeight;

            if (sizeVal === 'custom') {
                imgW = parseInt(document.getElementById('customW').value);
                imgH = parseInt(document.getElementById('customH').value);
            } else if (sizeVal !== 'original') {
                const [w, h] = sizeVal.split('x').map(Number);
                imgW = w; imgH = h;
            }

            const stripH = Math.round(imgH * 0.22);
            const totalH = imgH + stripH;
            const ctx    = outputCanvas.getContext('2d');
            outputCanvas.width  = imgW;
            outputCanvas.height = totalH;

            ctx.clearRect(0, 0, imgW, totalH);
            ctx.drawImage(loadedImg, 0, 0, imgW, imgH);

            ctx.fillStyle = '#ffffff';
            ctx.fillRect(0, imgH, imgW, stripH);

            const lw = Math.max(2, Math.round(imgW * 0.006));
            ctx.strokeStyle = '#000000';
            ctx.lineWidth   = lw;
            ctx.strokeRect(lw / 2, lw / 2, imgW - lw, totalH - lw);

            ctx.fillStyle    = '#000000';
            ctx.textAlign    = 'center';
            ctx.textBaseline = 'middle';

            const nameFontSize = Math.round(stripH * 0.30);
            const dateFontSize = Math.round(stripH * 0.24);

            ctx.font = 'bold ' + nameFontSize + 'px Arial, sans-serif';
            ctx.fillText(name, imgW / 2, imgH + Math.round(stripH * 0.35));

            const dobStr = 'DOB & Date: ' + fmtDate(dobVal);
            ctx.font = dateFontSize + 'px Arial, sans-serif';
            ctx.fillText(dobStr, imgW / 2, imgH + Math.round(stripH * 0.72));

            const targetKB = selectedKB || parseInt(document.getElementById('customKbInput').value) || null;
            let dataURL;

            if (targetKB && targetKB > 0) {
                let lo = 0.01, hi = 1.0, best = outputCanvas.toDataURL('image/jpeg', 0.8);
                for (let i = 0; i < 20; i++) {
                    const mid = (lo + hi) / 2;
                    const d   = outputCanvas.toDataURL('image/jpeg', mid);
                    const kb  = (d.split(',')[1].length * 0.75) / 1024;
                    if (kb <= targetKB) { best = d; lo = mid; }
                    else hi = mid;
                    if (hi - lo < 0.005) break;
                }
                dataURL = best;
            } else {
                dataURL = outputCanvas.toDataURL('image/jpeg', 0.92);
            }

            const newSizeKB = (dataURL.split(',')[1].length * 0.75) / 1024;

            document.getElementById('outSize').textContent      = fmtKB(newSizeKB);
            document.getElementById('outDims').textContent      = imgW + '×' + totalH + ' px';
            document.getElementById('statName').textContent     = name;
            document.getElementById('statDOB').textContent      = fmtDate(dobVal);
            document.getElementById('statDims').textContent     = imgW + '×' + totalH + ' px';
            document.getElementById('statFileSize').textContent = fmtKB(newSizeKB);

            document.getElementById('downloadBtn').onclick = () => {
                const a    = document.createElement('a');
                a.href     = dataURL;
                a.download = 'name-dob-photo-rojgarsangam.jpg';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
            };

            workspace.classList.remove('active');
            resultSection.classList.add('active');
            window.scrollTo({ top: 0, behavior: 'smooth' });

        } catch(err) {
            console.error(err);
            alert('Error: ' + err.message);
        } finally {
            processingOverlay.classList.remove('active');
        }
    });

    document.getElementById('createNewBtn').addEventListener('click', () => {
        loadedImg      = null;
        originalSizeKB = 0;
        selectedKB     = null;
        document.getElementById('nameInput').value          = '';
        document.getElementById('dobInput').value           = '';
        document.getElementById('sizeSelect').value         = 'original';
        document.getElementById('customKbInput').value      = '';
        document.getElementById('customSizeRow').style.display = 'none';
        document.querySelectorAll('.kb-btn').forEach(b => b.classList.remove('active'));
        hideError();
        resultSection.classList.remove('active');
        workspace.classList.remove('active');
        uploadArea.style.display = 'block';
        window.scrollTo({ top: 0, behavior: 'smooth' });
    });
    </script>
</body>
</html>
